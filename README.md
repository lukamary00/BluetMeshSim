# bluetooth-mesh-simulation
An application to provide comfortable solutions for IoT designing.
# Запуск
Существует два способа для того чтобы запустить симуляцию:

  - С графическим интерфейсом
  - С консоли для тестов ( предпочитаемый )

## GUI
 Для графического интерфейса нужно сначала установить все зависимости и в данный момент это можна сделать с помощью команды 
 `pip install -r requirements.txt`.
 После этого нужно будет вписать команду `python main.py` в той же папкe в которой находяться `requirements.txt`. 
 В результате откроеться графический интерфейс, который позволяет:
  
    - переключаться между вкладками.
    - загружать карту (нет никакой проверки правильности формата входных данных. Загруженная карта показываеться на вкладку `Nodes configuation`.
## Командная строка
Для того чтобы запустить симуляцию с командной строки нужно перейти в папку `simulation` и запустить файл `setup.py`. Никаких зависимостей устанавливать не нужно. При таком запуске может появиться ошибка 
```
Module simulation is not found ....
```
В таком случае нужно будет подняться на уровень выше и вписать команду:
```
export PYTHONPATH=`pwd` 
```
И повторить попытку. 
После успешного запска в консоль должна выписаться сгенирированая карта.

# Структура.
Весь проект поделен на модули, которые отечают реальным симулируемым объектам. Такими модулями являються:
  
  - Сеть
  - Среда
  - Элементы
  - Модели
  
  
 Кроме этого есть также модуль с GUI.
 Каждый модуль кроме элементов и моделей(объеденены в общюю папку Узлы) находиться в папке с соответствующим названием. 
 В каждой папке есть файл `__init__.py`, в котором коротко описано что именно делает модуль.
Далее коротко о каждом из них.
# Сеть
Это модуль в котором происходит передача пакетов. Сеть должна следить регистрировать устройства и позволять им передавать сообщения между собой. Кроме того сеть следит за тем насколько вероятно то, что пакет дойдет из пункта А в пункт Б.
# Среда 
Среда - это мир окружающий устройства. В среде есть такие вещи как температура, интенсивность освещения, время суток. Изминения среды должны вызывать реакцию у элементов. Например при понижении температуры ниже критического уровня, обогреватели должны начать обогревать дом. Среда должна реагировать на это и увеличивать темепратуру.
# Элементы 
Это физические сущности которые влиюят на среду. У них есть физичекие параметры, такие как заряд батареи, излучаемое тепло/освещение и прочее. Все элементы имеют модели.
# Модели 
Модели - это логика которая описывает поведение элементов, фактическе - установленный на каком-то железе софт. Такой логикой являеться например включение обогревания при достижения температурой определенного уровня, высылание и обработка сообщений и прочее. Все модели в свою очередь деляться на два типа:

  - Общие - например включение и выключение
  - Спецыфические - например включение обогрева. ( логика включения обогрева нужна только обогревателю и не имеет никакого отношения например к лампочкам )
  
 Из моделей и элементов состоят Узлы. Здесь будет продолжение после более глубокого погружение в тематику.
 
 # Документирование кода
 Код пишем не в одиночку, поэтому очень важно чтобы он был описан. Описание не обязательно должно быть полным, но оно должно давать понятие о том что должна делать функция и какие параметры она принимает.
 Пример:
 ```python
 def send_fram(msg):
      for subscr in subscribers:
           subscr.send(msg)
 ```
 Не лучший кометарий:
 ```python
 def send_fram(msg):
      """
      Send message, that reqiure some action from node, by looping through every instance of subscribers end calling method receive.  
      """
 ```
 Более хороший коментарий (пояснение обозначений поле разбора примеров):
 
```python
 def send_frame(msg: Frame) -> None:
    """
    Sends frame to each of it's sunbsribers.
    :param msg: - frame that should be sent
    """
 ```
 
 Второй лучше первого по следующих причинах:
    - Меньше текста, что позволяет быстрее его переварить
    - Указан тип параметров которые он хотел бы получить
    - Описано чем конкретно этот параметр есть
    - Указан тип который функция вернет
    
Теперь насчёт обозначений:
Запись
```python
msg:Frame
```
означает, что функция ожидает сообщения тип которого - это Frame. *Важно* - это не то же самое, что декларация типов в java или с++. Функция будет работать даже если вмето `Frame` мы подадим строку или int. Это служит единственно для документации кода и упрощения его понимания.

Запись
```python
def send() -> None:
```
ознaчает, что мы функция не вернет ничего (тип `None`). Точно также там могут быть другие типы (int, boolean, MyCustomClass, etc)
Тройные кавычки - общепринятый враппер вокруг пайтоновских коментарий к функциям.
Запись 
```python
:param some_text: some explanation
```
должна быть форматирована как выше. То есть сначала двоеточие, слово param название аргумента и опять двоеточие. Потом пояснение. Благодаря этому IDE разделит параметры на отдельные линии в подсказках, а не сплющит в одну.
